<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>La nostra futura casa</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Comic Sans MS", "Comic Sans", cursive;
      background: #ffeedd;
      color: #333;
    }
    header {
      text-align: center;
      padding: 2rem 1rem;
      background: #ffcc99;
    }
    h1 {
      margin: 0;
      font-size: 2rem;
    }
    .intro {
      margin-top: 0.5rem;
      font-size: 1.1rem;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .house-map {
      text-align: center;
      position: relative;
      margin-bottom: 2rem;
    }
    .house-map img {
      max-width: 100%;
      height: auto;
      border: 3px solid #ff9900;
      border-radius: 10px;
    }
    /* Stile per il popup (modale) */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none; /* hidden di default */
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    .modal {
      background: #fff;
      padding: 1.5rem;
      border-radius: 8px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      position: relative;
      text-align: center;
    }
    .modal h2 {
      margin-top: 0;
      margin-bottom: 0.5rem;
    }
    .close-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
    }
    .progress-bar-container {
      background: #eee;
      border-radius: 20px;
      margin: 1rem 0;
      overflow: hidden;
      height: 20px;
      width: 100%;
    }
    .progress-bar-fill {
      background: #ff9900;
      height: 100%;
      transition: width 0.3s ease-in-out;
    }
    .btn-bonifico {
      display: inline-block;
      padding: 0.5rem 1rem;
      background: #ff9900;
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      margin-top: 0.5rem;
    }
    .btn-bonifico:hover {
      background: #cc7a00;
    }
    footer {
      text-align: center;
      margin: 3rem 0 1rem;
      color: #666;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>La nostra futura casa</h1>
    <p class="intro">
      ciao! Benvenuto nella nostra futura casa! Come dici? Vuoi aiutarci a costruirla??<br/>
      Ma wow, che gentile! Prego, scegli pure come contribuire :)
    </p>
  </header>

  <div class="container">
    <!-- Sezione Mappa Casa -->
    <div class="house-map">
      <!-- Usa la tua immagine caricata su GitHub o in locale -->
      <img
        src="casa.jpg"
        usemap="#houseMap"
        alt="Mappa interattiva della casa"
      />

      <!-- Definizione dell'image map -->
      <!-- NOTA: i coordinate in area sono di esempio, da adattare all'immagine vera -->
      <map name="houseMap">
        <!-- Salotto (esempio) -->
        <area 
          shape="rect" 
          coords="120,100,200,180" 
          alt="Salotto" 
          href="#"
          onclick="openModal('salotto'); return false;"
        />
        <!-- Cucina (esempio) -->
        <area 
          shape="rect" 
          coords="220,100,300,180" 
          alt="Cucina" 
          href="#"
          onclick="openModal('cucina'); return false;"
        />
        <!-- Piante / Giardino (esempio) -->
        <area 
          shape="rect" 
          coords="50,250,150,320" 
          alt="Giardino" 
          href="#"
          onclick="openModal('piante'); return false;"
        />
      </map>
    </div>

    <!-- Modale generica -->
    <div class="modal-overlay" id="modalOverlay">
      <div class="modal" id="modalContent">
        <button class="close-btn" onclick="closeModal()">×</button>
        <h2 id="roomTitle"></h2>
        <p id="roomDescription"></p>
        <div class="progress-bar-container">
          <div class="progress-bar-fill" id="roomProgress"></div>
        </div>
        <p><span id="roomCollected"></span> / <span id="roomGoal"></span> € raccolti</p>
        <a class="btn-bonifico" href="#bonifico" onclick="alert('Grazie per voler contribuire! Effettua il bonifico.');">
          Contribuisci con bonifico
        </a>
      </div>
    </div>

    <!-- Sezione per lista regali (opzionale) -->
    <h2 style="text-align:center; margin-bottom:1rem;">Lista regali / sezioni</h2>
    <div id="listaRegali"></div>

    <hr style="margin:2rem 0;" />

    <!-- Info Bonifico -->
    <h3>Come effettuare il bonifico</h3>
    <p>
      IBAN: <strong>IT00A123456789000</strong><br/>
      Intestato a: <strong>Nome Cognome</strong><br/>
      Causale: <strong>Regalo per la casa</strong>
    </p>
    <p>
      Dopo aver effettuato il bonifico, ti chiediamo la cortesia di mandarci una mail
      a <strong>mialtro@email.com</strong> per segnalarci l'importo. Così aggiorniamo la
      barra di avanzamento!
    </p>
  </div>

  <footer>
    &copy; 2025 - Sito Lista Nozze Fumettoso
  </footer>

  <script>
    // Esempio di "database" fittizio delle sezioni
    const rooms = [
      {
        id: "salotto",
        title: "Salotto",
        description: "Divano, poltrone, TV e decorazioni!",
        goal: 1000,
        collected: 400
      },
      {
        id: "cucina",
        title: "Cucina",
        description: "Forno, piano cottura e pentole!",
        goal: 1500,
        collected: 900
      },
      {
        id: "piante",
        title: "Piante / Giardino",
        description: "Un po' di verde per il nostro futuro nido!",
        goal: 200,
        collected: 200
      }
    ];

    // Funzione per aprire la modale
    function openModal(roomId) {
      const overlay = document.getElementById("modalOverlay");
      const content = document.getElementById("modalContent");

      // Troviamo i dati della stanza
      const roomData = rooms.find(r => r.id === roomId);

      if (roomData) {
        document.getElementById("roomTitle").textContent = roomData.title;
        document.getElementById("roomDescription").textContent = roomData.description;
        document.getElementById("roomCollected").textContent = roomData.collected;
        document.getElementById("roomGoal").textContent = roomData.goal;

        // Calcolo percentuale
        let perc = (roomData.collected / roomData.goal) * 100;
        if (perc > 100) perc = 100;
        document.getElementById("roomProgress").style.width = perc + "%";
      }

      overlay.style.display = "flex";
    }

    // Funzione per chiudere la modale
    function closeModal() {
      document.getElementById("modalOverlay").style.display = "none";
    }

    // Mostra la lista regali in una sezione dedicata
    const listaRegaliDiv = document.getElementById("listaRegali");
    function renderListaRegali() {
      let html = '<div style="display:flex; flex-wrap:wrap; gap:1rem; justify-content:center;">';
      rooms.forEach(room => {
        const perc = Math.min((room.collected / room.goal) * 100, 100);
        html += `
          <div style="border:2px solid #ff9900; border-radius:10px; padding:1rem; width:250px; background:#fff;">
            <h3 style="margin-top:0;">${room.title}</h3>
            <p>${room.description}</p>
            <div class="progress-bar-container" style="margin-bottom:0.5rem;">
              <div class="progress-bar-fill" style="width:${perc}%;"></div>
            </div>
            <p style="font-size:0.9rem;">
              <strong>${room.collected}</strong> / <strong>${room.goal}</strong> € raccolti
            </p>
            <button 
              style="background:#ff9900; color:#fff; border:none; padding:0.5rem 1rem; border-radius:5px; cursor:pointer;"
              onclick="openModal('${room.id}')">
              Contribuisci
            </button>
          </div>
        `;
      });
      html += '</div>';
      listaRegaliDiv.innerHTML = html;
    }

    // Inizializziamo la lista
    renderListaRegali();
  </script>
</body>
</html>
